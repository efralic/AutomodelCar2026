<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 800 600">
  <style>
    .title { font-family: Arial; font-size: 18px; font-weight: bold; fill: #2c3e50; }
    .subtitle { font-family: Arial; font-size: 12px; fill: #34495e; }
    .node-text { font-family: Arial; font-size: 10px; fill: white; font-weight: bold; }
    .topic-text { font-family: Arial; font-size: 8px; fill: #e74c3c; font-weight: bold; }
    .small-text { font-family: Arial; font-size: 7px; fill: #7f8c8d; }
    .sensor { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; }
    .process { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
    .master { fill: #f39c12; stroke: #e67e22; stroke-width: 2; }
    .topic { fill: #ecf0f1; stroke: #bdc3c7; stroke-width: 1; }
    .actuator { fill: #27ae60; stroke: #229954; stroke-width: 2; }
    .arrow { stroke: #34495e; stroke-width: 2; fill: none; }
  </style>
  
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#34495e"/>
    </marker>
  </defs>
  
  <!-- Título -->
  <text x="400" y="25" text-anchor="middle" class="title">Diagrama de Flujo de Datos ROS - Sistema AVIM</text>
  
  <!-- Sensores -->
  <text x="50" y="60" class="subtitle">Sensores</text>
  
  <rect x="50" y="70" width="70" height="35" rx="5" class="sensor"/>
  <text x="85" y="92" text-anchor="middle" class="node-text">Cámara RGB</text>
  
  <rect x="50" y="115" width="70" height="35" rx="5" class="sensor"/>
  <text x="85" y="137" text-anchor="middle" class="node-text">LIDAR</text>
  
  <!-- Tópicos de entrada -->
  <rect x="140" y="75" width="100" height="18" rx="3" class="topic"/>
  <text x="190" y="87" text-anchor="middle" class="topic-text">/camera/image_raw</text>
  
  <rect x="140" y="120" width="60" height="18" rx="3" class="topic"/>
  <text x="170" y="132" text-anchor="middle" class="topic-text">/scan</text>
  
  <!-- Nodos de procesamiento -->
  <text x="270" y="60" class="subtitle">Procesamiento</text>
  
  <rect x="270" y="70" width="80" height="35" rx="5" class="process"/>
  <text x="310" y="92" text-anchor="middle" class="node-text">lane_detection</text>
  
  <rect x="270" y="115" width="80" height="35" rx="5" class="process"/>
  <text x="310" y="137" text-anchor="middle" class="node-text">object_detection</text>
  
  <rect x="270" y="160" width="80" height="35" rx="5" class="process"/>
  <text x="310" y="177" text-anchor="middle" class="node-text">object_detection</text>
  <text x="310" y="187" text-anchor="middle" class="small-text">_parking</text>
  
  <!-- Tópicos de procesamiento -->
  <rect x="370" y="75" width="80" height="18" rx="3" class="topic"/>
  <text x="410" y="87" text-anchor="middle" class="topic-text">/distance_center</text>
  
  <rect x="370" y="100" width="60" height="18" rx="3" class="topic"/>
  <text x="400" y="112" text-anchor="middle" class="topic-text">/angle_line</text>
  
  <rect x="370" y="120" width="80" height="18" rx="3" class="topic"/>
  <text x="410" y="132" text-anchor="middle" class="topic-text">/objects_detected</text>
  
  <rect x="370" y="165" width="80" height="18" rx="3" class="topic"/>
  <text x="410" y="177" text-anchor="middle" class="topic-text">/parking_objects</text>
  
  <!-- Nodos Master -->
  <text x="480" y="60" class="subtitle">Control Master</text>
  
  <rect x="480" y="70" width="70" height="40" rx="5" class="master"/>
  <text x="515" y="87" text-anchor="middle" class="node-text">Master</text>
  <text x="515" y="97" text-anchor="middle" class="small-text">Dinámico</text>
  <text x="515" y="105" text-anchor="middle" class="small-text">PID</text>
  
  <rect x="480" y="120" width="70" height="40" rx="5" class="master"/>
  <text x="515" y="137" text-anchor="middle" class="node-text">Master_static</text>
  <text x="515" y="147" text-anchor="middle" class="small-text">A* Planning</text>
  
  <rect x="480" y="170" width="70" height="40" rx="5" class="master"/>
  <text x="515" y="187" text-anchor="middle" class="node-text">Master_parking</text>
  <text x="515" y="197" text-anchor="middle" class="small-text">Precisión</text>
  
  <!-- Comandos de salida -->
  <text x="580" y="60" class="subtitle">Comandos</text>
  
  <rect x="580" y="85" width="60" height="18" rx="3" class="topic"/>
  <text x="610" y="97" text-anchor="middle" class="topic-text">/cmd_vel</text>
  
  <rect x="580" y="110" width="60" height="18" rx="3" class="topic"/>
  <text x="610" y="122" text-anchor="middle" class="topic-text">/steering</text>
  
  <rect x="580" y="135" width="70" height="18" rx="3" class="topic"/>
  <text x="615" y="147" text-anchor="middle" class="topic-text">/speed_control</text>
  
  <rect x="580" y="160" width="70" height="18" rx="3" class="topic"/>
  <text x="615" y="172" text-anchor="middle" class="topic-text">/angle_control</text>
  
  <!-- Actuadores -->
  <rect x="680" y="115" width="70" height="40" rx="5" class="actuator"/>
  <text x="715" y="132" text-anchor="middle" class="node-text">Actuadores</text>
  <text x="715" y="142" text-anchor="middle" class="small-text">Vehículo</text>
  
  <!-- Conexiones principales -->
  <line x1="120" y1="87" x2="140" y2="84" class="arrow" marker-end="url(#arrow)"/>
  <line x1="120" y1="132" x2="140" y2="129" class="arrow" marker-end="url(#arrow)"/>
  
  <line x1="240" y1="84" x2="270" y2="87" class="arrow" marker-end="url(#arrow)"/>
  <line x1="200" y1="129" x2="270" y2="132" class="arrow" marker-end="url(#arrow)"/>
  <line x1="200" y1="129" x2="270" y2="177" class="arrow" marker-end="url(#arrow)"/>
  
  <line x1="350" y1="87" x2="370" y2="84" class="arrow" marker-end="url(#arrow)"/>
  <line x1="350" y1="87" x2="370" y2="109" class="arrow" marker-end="url(#arrow)"/>
  <line x1="350" y1="132" x2="370" y2="129" class="arrow" marker-end="url(#arrow)"/>
  <line x1="350" y1="177" x2="370" y2="174" class="arrow" marker-end="url(#arrow)"/>
  
  <line x1="450" y1="84" x2="480" y2="90" class="arrow" marker-end="url(#arrow)"/>
  <line x1="430" y1="109" x2="480" y2="90" class="arrow" marker-end="url(#arrow)"/>
  <line x1="450" y1="129" x2="480" y2="140" class="arrow" marker-end="url(#arrow)"/>
  <line x1="450" y1="174" x2="480" y2="190" class="arrow" marker-end="url(#arrow)"/>
  
  <line x1="550" y1="90" x2="580" y2="94" class="arrow" marker-end="url(#arrow)"/>
  <line x1="550" y1="90" x2="580" y2="119" class="arrow" marker-end="url(#arrow)"/>
  <line x1="550" y1="140" x2="580" y2="144" class="arrow" marker-end="url(#arrow)"/>
  <line x1="550" y1="190" x2="580" y2="169" class="arrow" marker-end="url(#arrow)"/>
  
  <line x1="640" y1="94" x2="680" y2="135" class="arrow" marker-end="url(#arrow)"/>
  <line x1="640" y1="119" x2="680" y2="135" class="arrow" marker-end="url(#arrow)"/>
  <line x1="650" y1="144" x2="680" y2="135" class="arrow" marker-end="url(#arrow)"/>
  <line x1="650" y1="169" x2="680" y2="135" class="arrow" marker-end="url(#arrow)"/>
  
  <!-- Información de modos -->
  <rect x="50" y="230" width="700" height="340" rx="10" fill="#f8f9fa" stroke="#bdc3c7" stroke-width="2"/>
  <text x="400" y="250" text-anchor="middle" class="subtitle">Configuraciones por Modo de Operación</text>
  
  <!-- Modo 1 -->
  <rect x="70" y="270" width="150" height="70" rx="5" fill="#e8f5e8" stroke="#27ae60" stroke-width="2"/>
  <text x="145" y="285" text-anchor="middle" class="node-text" fill="#27ae60">Modo 1: Sin Obstáculos</text>
  <text x="80" y="300" class="small-text">Nodos: lane_detection + Master</text>
  <text x="80" y="315" class="small-text">Flujo: Cámara → Detección líneas → Control</text>
  <text x="80" y="330" class="small-text">Frecuencia: 30 Hz</text>
  
  <!-- Modo 2 -->
  <rect x="240" y="270" width="150" height="70" rx="5" fill="#fff3cd" stroke="#f39c12" stroke-width="2"/>
  <text x="315" y="285" text-anchor="middle" class="node-text" fill="#f39c12">Modo 2: Obstáculos Estáticos</text>
  <text x="250" y="300" class="small-text">Nodos: lane_detection + object_detection</text>
  <text x="250" y="315" class="small-text">+ Master_static</text>
  <text x="250" y="330" class="small-text">Planificación: A*</text>
  
  <!-- Modo 3 -->
  <rect x="410" y="270" width="150" height="70" rx="5" fill="#f8d7da" stroke="#e74c3c" stroke-width="2"/>
  <text x="485" y="285" text-anchor="middle" class="node-text" fill="#e74c3c">Modo 3: Obstáculos Dinámicos</text>
  <text x="420" y="300" class="small-text">Nodos: lane_detection + object_detection</text>
  <text x="420" y="315" class="small-text">+ Master (dinámico)</text>
  <text x="420" y="330" class="small-text">Evasión en tiempo real</text>
  
  <!-- Modo 4 -->
  <rect x="580" y="270" width="150" height="70" rx="5" fill="#e2e3f3" stroke="#9b59b6" stroke-width="2"/>
  <text x="655" y="285" text-anchor="middle" class="node-text" fill="#9b59b6">Modo 4: Parking</text>
  <text x="590" y="300" class="small-text">Nodos: lane_detection +</text>
  <text x="590" y="315" class="small-text">object_detection_parking</text>
  <text x="590" y="330" class="small-text">+ Master_parking</text>
  
  <!-- Rendimiento -->
  <rect x="70" y="360" width="660" height="190" rx="5" fill="#f0f0f0" stroke="#bdc3c7" stroke-width="1"/>
  <text x="400" y="380" text-anchor="middle" class="subtitle">Información de Rendimiento y Comunicación</text>
  
  <text x="90" y="400" class="small-text" font-weight="bold">Frecuencias de Publicación:</text>
  <text x="110" y="415" class="small-text">• /camera/image_raw: 30 Hz</text>
  <text x="110" y="430" class="small-text">• /scan: 10 Hz</text>
  <text x="110" y="445" class="small-text">• /distance_center: 30 Hz</text>
  <text x="110" y="460" class="small-text">• /objects_detected: 10 Hz</text>
  
  <text x="350" y="400" class="small-text" font-weight="bold">Latencias Típicas:</text>
  <text x="370" y="415" class="small-text">• Procesamiento imagen: ~33ms</text>
  <text x="370" y="430" class="small-text">• Detección obstáculos: ~100ms</text>
  <text x="370" y="445" class="small-text">• Control total: &lt;150ms</text>
  
  <text x="90" y="480" class="small-text" font-weight="bold">Configuración de Launch Files:</text>
  <text x="110" y="495" class="small-text">• Modo 1: roslaunch bring_up autonomos_mode1.launch</text>
  <text x="110" y="510" class="small-text">• Modo 2: roslaunch bring_up autonomos_mode2.launch</text>
  <text x="110" y="525" class="small-text">• Modo 3: roslaunch bring_up autonomos_mode3.launch</text>
  <text x="110" y="540" class="small-text">• Modo 4: roslaunch bring_up autonomos_mode4.launch</text>
  
</svg>